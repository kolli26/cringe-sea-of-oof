<!DOCTYPE html>
<html>
    <head>
        <title>Cringe</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <h2 class="rainbow">Press this button to use <i>Cringe Alarm</i></h2>
        <div id="form">
            <label for="uid">User ID:</label>
            <input oninput="checkNum()" type="text" id="uid" name="uid">
            <br>
            <br id="err4">
            <label id="err" class="err">Must be number!</label>
            <br id="err2" class="err">
            <br id="err3" class="err">
            <button id="submitButton" class="button" onclick="cringeAlarm()">Cringe Alarm</button>
        </div>
    </body>
</html>
<script>
    function checkNum(){
        const value = document.getElementById("uid").value
        console.log(value)
        if(isNaN(value) === true){
            document.getElementById("err").style.display = "block"
            document.getElementById("err2").style.display = "block"
            document.getElementById("err4").style.display = "none"
            document.getElementById("submitButton").disabled = true
        } else {
            document.getElementById("err").style.display = "none"
            document.getElementById("err2").style.display = "none"
            document.getElementById("err4").style.display = "block"
            document.getElementById("submitButton").disabled = false
        }
    }

    function cringeAlarm(){
        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");
        myHeaders.append("Cookie", "__dcfduid=b84ae564190346e69b1981061304a72a");

        var raw = JSON.stringify({"content":"https://tenor.com/view/dies-of-cringe-cringe-gif-20747133"});

        var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: raw,
        redirect: 'follow'
        };

        fetch("https://discord.com/api/webhooks/851479164544614470/9L_U1OPk12YjzfWmdnFtXVX5klp8zx_mDYBtPFyjiCFCt5vgJaeey7g-MI0coQbLa48K", requestOptions)
        .then(response => response.text())
        .then(result => console.log(result))
        .catch(error => console.log('error', error));
        if(document.getElementById("uid").value === ""){
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");
            myHeaders.append("Cookie", "__dcfduid=b84ae564190346e69b1981061304a72a");

            var raw = JSON.stringify({"content":"No cringe accepted, please stop!"});

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("https://discord.com/api/webhooks/851479164544614470/9L_U1OPk12YjzfWmdnFtXVX5klp8zx_mDYBtPFyjiCFCt5vgJaeey7g-MI0coQbLa48K", requestOptions)
            .then(response => response.text())
            .then(result => console.log(result))
            .catch(error => console.log('error', error));
        } else {
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");
            myHeaders.append("Cookie", "__dcfduid=b84ae564190346e69b1981061304a72a");

            var raw = JSON.stringify({"content":`<@${document.getElementById("uid").value}> No cringe accepted, please stop!`});

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("https://discord.com/api/webhooks/851479164544614470/9L_U1OPk12YjzfWmdnFtXVX5klp8zx_mDYBtPFyjiCFCt5vgJaeey7g-MI0coQbLa48K", requestOptions)
            .then(response => response.text())
            .then(result => console.log(result))
            .catch(error => console.log('error', error));  
        }
    }
</script>